توضیح کد پروژه 

در ادامه، کدی که نوشته‌ای را نه خط‌به‌خط سطحی، بلکه مفهومی، تحلیلی و قابل دفاع علمی توضیح می‌دهم؛ دقیقاً در سطحی که استاد انتظار دارد.

1. هدف کلی کد و مسئله‌ی مهندسی

هدف این برنامه، طراحی یک سیستم امتیازدهی چندمرحله‌ای (Multi-stage Scoring System) برای استعداد‌یابی اولیه ورزشکاران کاراته است. این سیستم تلاش می‌کند با ترکیب سه منبع اطلاعاتی مستقل:

داده‌های متنی (ویژگی‌های فردی)

داده‌های تصویری

داده‌های ویدئویی

یک نمره‌ی نهایی نرمال‌شده بین ۰ و ۱ تولید کند که نشان‌دهنده‌ی پتانسیل ورزشی فرد باشد.

این رویکرد در علم داده به‌عنوان یک Hybrid Heuristic Model شناخته می‌شود؛ یعنی ترکیبی از قواعد تجربی (Heuristics) به‌جای یادگیری ماشین کامل.

2. معماری کلی برنامه

کد از نظر ساختاری به چهار بخش اصلی تقسیم شده است:

مرحله امتیازدهی متنی (Text-based Scoring)

مرحله تحلیل تصویر (Image-based Scoring)

مرحله تحلیل ویدئو (Video-based Scoring)

منطق نهایی تصمیم‌گیری (Decision Logic)

این تفکیک، از نظر مهندسی نرم‌افزار، یک طراحی ماژولار ساده اما صحیح است.

3. مرحله امتیازدهی متنی (Text Score)
3.1 فلسفه‌ی این مرحله

داده‌های متنی، کم‌هزینه‌ترین و سریع‌ترین داده‌ها برای تحلیل اولیه هستند. در این مرحله، برنامه از اطلاعاتی استفاده می‌کند که در علوم ورزشی به‌عنوان شاخص‌های پایه استعداد شناخته می‌شوند:

سن

BMI

وضعیت آسیب‌دیدگی

سابقه تمرین

انعطاف‌پذیری

سرعت واکنش

توان هوازی

3.2 تابع text_score
def text_score(age, bmi, injury, experience, flexibility, reaction, cardio):


این تابع یک تابع امتیازدهی خطی وزن‌دار است. هر ویژگی، سهم مشخصی در امتیاز نهایی دارد.

3.3 تحلیل علمی وزن‌دهی‌ها
سن:
if 12 <= age <= 25:
    score += 0.2


بازه‌ی ۱۲ تا ۲۵ سال مطابق مطالعات فیزیولوژی ورزشی، بازه‌ی طلایی یادگیری مهارت‌های انفجاری و عصبی-عضلانی است. بنابراین وزن ۰٫۲ منطقی و قابل دفاع است.

BMI:
if 18.5 <= bmi <= 25:
    score += 0.2


BMI نرمال نشان‌دهنده‌ی تناسب قد و وزن و کاهش ریسک آسیب است. این شرط به‌طور غیرمستقیم آمادگی بدنی را بررسی می‌کند.

آسیب‌دیدگی:
if not injury:
    score += 0.2


وجود آسیب فعال یک عامل کاهنده‌ی شدید عملکرد است. در مدل‌های واقعی حتی ممکن است باعث حذف کامل فرد شود.

سابقه تمرین:
if experience >= 2:
    score += 0.15


حداقل دو سال تمرین منظم نشان‌دهنده‌ی سازگاری عصبی-عضلانی و تعهد ورزشی است.

انعطاف‌پذیری، واکنش، توان هوازی:
score += 0.1 / 0.05


این متغیرها نقش تکمیلی دارند و مجموعاً دقت مدل را افزایش می‌دهند.

3.4 جمع‌بندی مرحله متنی

حداکثر امتیاز این بخش حدود ۰٫۹۵ است که نشان می‌دهد این مرحله ستون اصلی تصمیم‌گیری محسوب می‌شود.

4. مرحله تحلیل تصویر (Image Score)
4.1 هدف مرحله تصویر

در نبود پردازش پیشرفته‌ی تصویر (OpenCV، Pose Estimation)، از کیفیت داده به‌عنوان نماینده‌ی غیرمستقیم استفاده شده است.

4.2 تابع image_score
img = Image.open(image_path)
w, h = img.size


وضوح تصویر به‌عنوان معیار ساده‌ی کیفیت داده استفاده می‌شود.

4.3 منطق امتیازدهی

تصاویر با وضوح بالا → احتمال ثبت حرکت واقعی

تصاویر کوچک → اطلاعات ناکافی

این روش یک Proxy Variable است، نه تحلیل واقعی حرکت؛ ولی برای پروژه دانشگاهی قابل قبول است.

5. مرحله تحلیل ویدئو (Video Score)
5.1 دلیل عدم استفاده از OpenCV

محدودیت نصب

سرعت اجرا

تمرکز بر سادگی و پایداری

5.2 تحلیل حجم فایل
file_size_mb = os.path.getsize(video_path) / (1024 * 1024)


حجم فایل به‌عنوان نماینده‌ی طول و محتوای ویدئو استفاده شده است.

5.3 منطق علمی پشت این روش

ویدئوی تمرین واقعی:

طولانی‌تر

دارای فریم‌های متنوع

حجم بیشتر

این روش یک Heuristic ساده ولی مؤثر است.

6. ادغام نهایی امتیازها
final_score = min(score_text + score_img + score_vid, 1.0)


جلوگیری از تجاوز از ۱

نرمال‌سازی خروجی

قابل تفسیر بودن نتیجه

7. منطق تصمیم‌گیری نهایی
if final_score >= 0.75:


سه سطح تصمیم:

استعداد بالا

پتانسیل متوسط

نامناسب مسیر قهرمانی

این دقیقاً همان چیزی است که در سیستم‌های غربالگری اولیه استفاده می‌شود.
